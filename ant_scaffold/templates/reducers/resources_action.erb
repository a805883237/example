import cFetch from '<%=config[:dir]%>../../utils/cFetch';
import { API_CONFIG } from '<%=config[:dir]%>../../config/api';
import { message } from 'antd';

function get<%=config[:resources_cap]%>Success(<%=config[:resources]%>) {
  return {
    type: "get<%=config[:resources_cap]%>Success",
    isFetching: false,
    data: <%=config[:resources]%>
  };
}

function request<%=config[:resources_cap]%>() {
  return {
  type: <%=config[:resources_cap]%>,
  isFetching: true
};
}

function get<%=config[:resource_cap]%>Success(data) {
  return {type: "get<%=config[:resource_cap]%>Success", data: data, isFetching: true};
}

export function get<%=config[:resources_cap]%>(params = { page: 1, per_page: 10 }) {
  return dispatch => {
    // let url=API_CONFIG.host + "";
    let url="../../data/<%=config[:path]%>/index.json";
    return cFetch(url, {
      method: "GET",
      params: {}
    }).then((response) => {
      dispatch(get<%=config[:resources_cap]%>Success(response.jsonResult));
    });
  };
}

export function get<%=config[:resource_cap]%>(id) {
  return (dispatch) => {
    let url="../../data/<%=config[:path]%>/index.json";
    return cFetch(url, {
      method: "GET",
      params: {}
    }).then((response) => {
      dispatch(get<%=config[:resource_cap]%>Success(response.jsonResult));
    });
  }
};


export function delete<%=config[:resources_cap]%>(params) {
  let url="../../data/<%=config[:path]%>/index.json";
  return (dispatch) => {
    return cFetch(API_CONFIG.host + "/admin/explore/pages/", {
      method: "DELETE",
      body: params
    }).then((response) => {
      dispatch(get<%=config[:resources_caps]%>(response.jsonResult));
    });
  }
};

export function save<%=config[:resource_cap]%>(params) {
  let url="../../data/<%=config[:path]%>/show.json";
  return (dispatch) => {
    return cFetch(url, {
      method: "POST",
      body: params
    }).then((response) => {
      dispatch(get<%=config[:resource_cap]%>());
    });
  }
};

export function update<%=config[:resource_cap]%>(id, params) {
  let url="../../data/<%=config[:path]%>/show.json";
  return (dispatch) => {
    return cFetch(url, {
      method: "PUT",
      body: params
    }).then((response) => {
      dispatch(get<%=config[:resources_cap]%>());
    });
  }
};
